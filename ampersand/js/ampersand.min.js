var Ajax={bindListener:function(a,t){var e=$("<div class='page-overlay'/>"),n=-t.outerHeight()+"px",i=-t.outerWidth()+"px";t.css({marginTop:n,marginLeft:i}),a.ajaxStart(function(){e.appendTo(a),e.on("click",function(){return!1}),t.show()}),a.ajaxStop(function(){e.off("click"),e.remove(),t.fadeOut()}),a.ajaxError(function(a,t,e,n){console.log("XHR Response: "+JSON.stringify(t))})},callHandler:function(a,t,e,n,i,o){$.ajax({type:a,url:t,cache:!1,global:i,data:e,success:n,error:Ajax.errorHandler,async:null==o||o})},getJson:function(a,t,e,n,i){$.ajax({url:a,dataType:"json",cache:!1,global:n,data:t,success:e,error:Ajax.errorHandler,async:i})},postForJSON:function(a,t,e,n,i){$.ajax({type:"POST",dataType:"json",url:a,cache:!1,global:n,data:t,success:e,error:Ajax.errorHandler,async:i})},postFormAsJson:function(a,t,e){var n=$("#"+a),i=n.attr("action"),o={data:JSON.stringify(form2js(a,".",!1,null,!0))};if(e&&0==e(n))return;$.ajax({type:"POST",dataType:"json",url:i,cache:!1,global:!1,data:o,success:t,error:Ajax.errorHandler,async:!0})},errorHandler:function(a,t,e){0!=a.status&&(alert("There was error processing the request!!"),console.log(a))},ajaxForm:function(a,t,e){$(a).ajaxForm({success:t,beforeSubmit:e,error:Ajax.errorHandler})}};Templates={get:function(a){return $("input[template='"+a+"']").size()>0?$("input[template='"+a+"']").val():(Ajax.callHandler("GET","templates/"+a,null,function(t,e,n){templateHtml=t,$("body").append("<input type='hidden' template='"+a+"' />"),$("input[template='"+a+"']").val(templateHtml)},!0,!1),templateHtml)}},Dialog={dialogId:"generic-dialog",dialogHtml:null,create:function(a,t,e,n,i,o,l,s,r,d){var c=this;this.dialogHtml=t,this.$dialog=$("#"+a),this.$dialog.size()>0&&this.$dialog.remove(),this.$dialog=$("<div id='"+a+"'></div>"),l&&(t+="<p><center><button class='btn btn-danger dialog-close-btn'>Close</button></center></p>"),this.$dialog.html(t),$("body").append(this.$dialog),this.$dialog.dialog({autoOpen:s,show:"fade",hide:"fade",zIndex:o||10001,width:n,minHeight:"auto",modal:!0,resizable:!1,closeOnEscape:!1,dialogClass:e||"",title:d||""}),$(document).on("click","#"+a+" .dialog-close-btn",function(t){$("#"+a).dialog("close"),t.preventDefault()}),r&&this.$dialog.on("dialogclose",function(a,t){c.$dialog.remove()}),i||this.$dialog.parents(".ui-dialog").find(".ui-dialog-titlebar").remove()},show:function(a,t,e,n,i,o,l){this.create(this.dialogId,a,t,e,n,i,o,!0,!0,l)},showAlert:function(a,t,e){a=t?a:"<h4 class='text-center mtop'>"+a+"</h4>",this.show(a,null,400,!1,null,!0),e&&Dialog.$dialog.find(".dialog-close-btn").click(e)},close:function(){this.$dialog.dialog("close")},confirm:function(a,t,e){var n="dialog-confirm-btn-panel",i=e?a:"<h4 class='text-center mtop'>"+a+"</h4>",o="<div class='text-center' id='"+n+"'>",l=1;$.each(t,function(a,t){var e=$("<button></button>");e.addClass(t.cssClass+" mright").html(t.btnHtml?t.btnHtml:a).attr("data-confirm-btn",l),$("#"+n+" button[data-confirm-btn='"+l+"']").off("click"),t.onclick?($(document).off("click","#"+n+" button[data-confirm-btn='"+l+"']"),$(document).on("click","#"+n+" button[data-confirm-btn='"+l+"']",$.proxy(t.onclick,this))):t.closeBtn&&e.addClass("dialog-close-btn"),o+=$("<div>").append(e.clone()).html(),l++}),i+=o+"</div>",this.show(i,null,400,!1,null,!1,null)},confirmYesNo:function(a,t,e){var n={Yes:{cssClass:"btn btn-success",onclick:t},No:{cssClass:"btn btn-danger",onclick:e||null,closeBtn:!e}};Dialog.confirm(a,n)},prompt:function(a,t,e){var n="<h4>"+a+"</h4><div><input type='text' id='dialog-prompt-input' /></div><div class='text-center mtop'><button type='text' id='dialog-prompt-accept' class='btn btn-success mright'>"+t+"</button><button class='dialog-close-btn btn btn-danger mright'>Cancel</button></div>";this.show(n,null,350,!1,null,!1,null)}},Popover={create:function(a,t,e,n,i){t=t+"<button class='close' onclick=\"$('#"+a+"').popover('hide');\">&times;</button>",$("#"+a).popover({placement:i||"top",html:!0,content:e,container:n||!1,title:t})},bindEvents:function(){$(document).on("click",".popover .close-popover",function(a){return $(a.target).parents(".popover").hide(),!1}),$(document).on("click",".popover-trigger",function(a){var t=$(a.target);if(t.hasClass("popover-trigger")||(t=t.parents(".popover-trigger")),null!=t.data("popoverId"))return $("#"+t.data("popoverId")).toggle(),!1})},init:function(){this.bindEvents()}},TopBar={init:function(){this.bindEvents()},bindEvents:function(){$(document).on("click",".top-bar .top-bar-toggle",$.proxy(this.toggleTopBar,this))},toggleTopBar:function(a){var t=$(a.target);t.hasClass("top-bar-toggle")||(t=t.parents(".top-bar-toggle"));var e=t.parents(".top-bar").find(".top-bar-content");return e.slideToggle({duration:300,easing:"easeInOutBack",complete:function(){e.is(":visible")?t.data("visible")&&t.html(t.data("visible")):t.data("hidden")&&t.html(t.data("hidden"))}}),!1}},Validation={init:function(){jQuery.isFunction(jQuery.fn.live)?$(".validate").live("change",function(a){Validation.validateInput($(a.target))}):jQuery.isFunction(jQuery.fn.on)&&$(document).on("change",".validate",function(a){Validation.validateInput($(a.target))})},validateInput:function(a){var t=a.val(),e=!0,n="";if(null!=a.data("validationTrim"))for(var i=a.data("validationTrim"),o=0,l=i.length;o<l;o++)t=t.split(i[o]).join("");if(a.hasClass("validate-required")&&e&&(e=""!=t,n=null!=a.data("requiredMessage")?a.data("requiredMessage"):"This field is required"),a.hasClass("validate-number")&&e&&(e=!isNaN(t),n=null!=a.data("numberMessage")?a.data("numberMessage"):"Please enter a valid number"),a.hasClass("validate-money")&&e&&((e=!isNaN(t))&&(e=t>=0),n=null!=a.data("moneyMessage")?a.data("moneyMessage"):"Please enter a valid amount"),a.hasClass("validate-positive-number")&&e&&((e=!isNaN(t))&&(e=t>=0),n=null!=a.data("positiveNumberMessage")?a.data("positiveNumberMessage"):"Please enter a valid positive number"),a.hasClass("validate-email")&&e){e=-1!=t.search(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i),n=null!=a.data("emailMessage")?a.data("emailMessage"):"Please enter Email in correct format"}(a.hasClass("validate-digits")&&e&&(e=t.match(/[0-9]*/)[0].length==t.length,n=null!=a.data("digitsMessage")?a.data("digitsMessage"):"Only digits allowed"),a.hasClass("validate-compare")&&e)&&(null!=a.data("compareId")&&(e=$("#"+a.data("compareId")).val()==t,n=null!=a.data("compareMessage")?a.data("compareMessage"):"Values do not match"));if(a.hasClass("validate-minlength")&&e&&null!=a.data("minLength")){var s=parseInt(a.data("minLength"));e=t.length>=s,n=null!=a.data("minlengthMessage")?a.data("minlengthMessage"):"Minimum "+s+" characters required."}if(a.hasClass("validate-maxlength")&&e&&null!=a.data("maxLength")){var r=parseInt(a.data("maxLength"));e=t.length<=r,n=null!=a.data("maxlengthMessage")?a.data("maxlengthMessage"):"Maximum "+r+" characters allowed."}if(a.hasClass("validate-date")&&e&&(e=this.validateDate(t),n=null!=a.data("dateMessage")?a.data("dateMessage"):"Not a valid date"),a.hasClass("validate-maxvalue")&&e&&null!=a.data("maxValue")){var d=parseFloat(a.data("maxValue"));t.length>0&&!isNaN(t)&&(e=parseFloat(t)<=d),n=null!=a.data("maxvalueMessage")?a.data("maxvalueMessage"):"Value cannot be more than "+d+"."}return a.next().hasClass("error-message")&&a.next().remove(),e?(a.removeClass("error-background"),!0):(""!=n&&a.after("<div class='error-message'>"+n+"</div>"),a.addClass("error-background"),!1)},validateForm:function(a){var t=$("#"+a+" .validate"),e=!0;return $.each(t,function(){var a=$(this);if(a.is(":visible")){var t=Validation.validateInput(a);e&=t}}),e},validateDate:function(a){if(/^\d{2}\/\d{2}\/\d{4}$/.test(a)){var t=a.split("/")[0],e=a.split("/")[1],n=a.split("/")[2],i=new Date(n,t-1,e);return i.getMonth()+1==t&&i.getDate()==e&&i.getFullYear()==n}return!1}},Utilities={init:function(){this.bindEvents()},bindEvents:function(){$(document).on("keyup",".advance-focus",$.proxy(this.advanceFocus,this)),$(document).on("focus",".formatted-field",$.proxy(this.removeFormattingEvent,this)).on("blur",".formatted-field",$.proxy(this.formatValue,this))},advanceFocus:function(a){var t=$(a.target),e=t.val().length;if(t.data("advfControl")){var n=-1;t.data("advfLength")?n=parseInt(t.data("advfLength")):t.attr("maxlength")&&(n=parseInt(t.attr("maxlength"))),e==n&&$(t.data("advfControl")).focus()}},removeFormattingEvent:function(a){var t=$(a.target);t.val(this.removeFormatting(t))},removeFormatting:function(a){var t=a.val();if(null!=a.data("validationTrim"))for(var e=a.data("validationTrim"),n=0,i=e.length;n<i;n++)t=t.split(e[n]).join("");return t},formatValue:function(a){var t=$(a.target);t.val().length>0&&("$"==t.data("display")&&t.val("$"+this.formatDollar(parseFloat(t.val()))),"%"==t.data("display")&&t.val(t.val()+"%"))},formatDollar:function(a,t){var e=a.toFixed(2).split("."),n=e[0].split("").reverse().reduce(function(a,t,e,n){return t+(!e||e%3?"":",")+a},"");return t&&(n+="."+e[1]),n}},function(a){var t=a({});a.subscribe=function(){t.on.apply(t,arguments)},a.unsubscribe=function(){t.off.apply(t,arguments)},a.publish=function(){t.trigger.apply(t,arguments)}}(jQuery),Loader={loading_open:!1,showLoadingBox:function(a){null==a&&(a="Loading"),this.loading_open=!0,$.blockUI({message:'<div class="loading-box">'+a+'&nbsp;&nbsp;<img style="vertical-align:middle" src="'+ampersandPath+'images/facebook-loader.gif" /></div>',css:{left:"45%",backgroundColor:"Transparent",border:"0"}})},hideLoadingBox:function(){$.unblockUI()},blockSectionForProcessing:function(a,t){this.showLoader($(a),t)},unblockSection:function(a){this.hideLoader($(a))},showProgressBar:function(a,t){this.blockSectionForProcessing(a,'<div class="loading-box">'+t+'&nbsp;&nbsp;<img style="vertical-align:middle" src="'+ampersandPath+'images/facebook-loader.gif" /></div>')},hideProgressBar:function(a){this.unblockSection(a)},showProgressLoader:function(a,t){this.showLoader(a,'<div class="loading-box">'+t+'&nbsp;&nbsp;<img style="vertical-align:middle" src="'+ampersandPath+'images/facebook-loader.gif" /></div>')},showLoader:function(a,t){a.block({message:t,css:{fadeIn:0,left:"45%",backgroundColor:"Transparent",border:"0"},centerY:!1})},hideLoader:function(a){a.unblock()}},$(document).ready(function(){TopBar.init(),Popover.init(),Validation.init(),Utilities.init()});
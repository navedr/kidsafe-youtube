function loadjscssfile(e,t){if(t=="js"){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",e)}else if(t=="css"){var n=document.createElement("link");n.setAttribute("rel","stylesheet");n.setAttribute("type","text/css");n.setAttribute("href",e)}if(typeof n!="undefined"){document.getElementsByTagName("head")[0].appendChild(n)}}var cssFiles=["bootstrap/css/bootstrap.min.css","jquery-ui/css/jquery-ui.min.css","css/introjs.min.css","css/validation.css","css/fancy.form.css","css/helper.css","font-awesome/css/font-awesome.min.css","css/topbar.css"];var jsFiles=["jquery/jquery.form.min.js","js/intro.min.js","bootstrap/js/bootstrap.min.js","js/underscore-min.js"];var thisScript=function(){var e="ScriptID"+Math.round(1e5*Math.random());document.write("<script id='"+e+"'></script>");var t=document.getElementById(e).previousSibling.getAttribute("src");document.getElementById(e).remove();return t}();var split=thisScript.split("/");var ampersandPath=thisScript.replace("ampersand/js/"+split[split.length-1],"");for(var x in cssFiles){loadjscssfile(ampersandPath+"ampersand/"+cssFiles[x],"css")}for(var x in jsFiles){loadjscssfile(ampersandPath+"ampersand/"+jsFiles[x],"js")}if(typeof ampersandPageScripts!="undefined"){for(var x in ampersandPageScripts){loadjscssfile(ampersandPageScripts[x],"js")}}var Ajax={bindListener:function(e,t){var n=$("<div class='page-overlay'/>");var r=-t.outerHeight()+"px";var i=-t.outerWidth()+"px";t.css({marginTop:r,marginLeft:i});e.ajaxStart(function(){n.appendTo(e);n.on("click",function(){return false});t.show()});e.ajaxStop(function(){n.off("click");n.remove();t.fadeOut()});e.ajaxError(function(e,t,n,r){console.log("XHR Response: "+JSON.stringify(t))})},callHandler:function(e,t,n,r,i,s){$.ajax({type:e,url:t,cache:false,global:i,data:n,success:r,error:Ajax.errorHandler,async:s!=null?s:true})},getJson:function(e,t,n,r,i){$.ajax({url:e,dataType:"json",cache:false,global:r,data:t,success:n,error:Ajax.errorHandler,async:i})},postForJSON:function(e,t,n,r,i){$.ajax({type:"POST",dataType:"json",url:e,cache:false,global:r,data:t,success:n,error:Ajax.errorHandler,async:i})},postFormAsJson:function(e,t,n){var r=$("#"+e);var i=r.attr("action");var s={data:JSON.stringify(form2js(e,".",false,null,true))};if(n){var o=n(r);if(o==false)return}$.ajax({type:"POST",dataType:"json",url:i,cache:false,global:false,data:s,success:t,error:Ajax.errorHandler,async:true})},errorHandler:function(e,t,n){if(e.status!=0){alert("There was error processing the request!!");console.log(e)}},ajaxForm:function(e,t,n){$(e).ajaxForm({success:t,beforeSubmit:n,error:Ajax.errorHandler})}};Templates={get:function(e){if($("input[template='"+e+"']").size()>0){return $("input[template='"+e+"']").val()}Ajax.callHandler("GET","templates/"+e,null,function(t,n,r){templateHtml=t;$("body").append("<input type='hidden' template='"+e+"' />");$("input[template='"+e+"']").val(templateHtml)},true,false);return templateHtml}};Dialog={dialogId:"generic-dialog",dialogHtml:null,create:function(e,t,n,r,i,s,o,u,a,f){var l=this;this.dialogHtml=t;this.$dialog=$("#"+e);if(this.$dialog.size()>0){this.$dialog.remove()}this.$dialog=$("<div id='"+e+"'></div>");if(o){t+="<p><center><button class='btn btn-danger dialog-close-btn'>Close</button></center></p>"}this.$dialog.html(t);$("body").append(this.$dialog);this.$dialog.dialog({autoOpen:u,show:"fade",hide:"fade",zIndex:s?s:10001,width:r,minHeight:"auto",modal:true,resizable:false,closeOnEscape:false,dialogClass:n?n:"",title:f?f:""});$("#"+e+" .dialog-close-btn").on("click",function(t){$("#"+e).dialog("close");t.preventDefault()});if(a){this.$dialog.on("dialogclose",function(e,t){l.$dialog.remove()})}if(!i){this.$dialog.parents(".ui-dialog").find(".ui-dialog-titlebar").remove()}},show:function(e,t,n,r,i,s,o){this.create(this.dialogId,e,t,n,r,i,s,true,true,o)},showAlert:function(e,t,n){e=t?e:"<h4 class='text-center mtop'>"+e+"</h4>";this.show(e,null,400,false,null,true);if(n){Dialog.$dialog.find(".dialog-close-btn").click(n)}},close:function(){this.$dialog.dialog("close")},confirm:function(e,t){var n="dialog-confirm-btn-panel";var r="<h4 class='text-center mtop'>"+e+"</h4>";var i="<div class='text-center' id='"+n+"'>";var s=1;$.each(t,function(e,t){var r=$("<button></button>");r.addClass(t.cssClass+" mright").html(t.btnHtml?t.btnHtml:e).attr("data-confirm-btn",s);$("#"+n+" button[data-confirm-btn='"+s+"']").off("click");if(t.onclick){$("#"+n+" button[data-confirm-btn='"+s+"']").on("click",$.proxy(t.onclick,this))}else if(t.closeBtn){r.addClass("dialog-close-btn")}i+=$("<div>").append(r.clone()).html();s++});r+=i+"</div>";this.show(r,null,400,false,null,false,null)},confirmYesNo:function(e,t,n){var r={Yes:{cssClass:"btn btn-success",onclick:t},No:{cssClass:"btn btn-danger",onclick:n?n:null,closeBtn:n?false:true}};Dialog.confirm(e,r)},prompt:function(e,t,n){var r="<h4>"+e+"</h4><div><input type='text' id='dialog-prompt-input' /></div><div class='text-center mtop'><button type='text' id='dialog-prompt-accept' class='btn btn-success mright'>"+t+"</button>"+"<button class='dialog-close-btn btn btn-danger mright'>Cancel</button></div>";this.show(r,null,350,false,null,false,null)}};Popover={create:function(e,t,n,r,i){t=t+"<button class='close' onclick=\"$('#"+e+"').popover('hide');\">&times;</button>";$("#"+e).popover({placement:i?i:"top",html:true,content:n,container:r?r:false,title:t})},bindEvents:function(){$(".popover .close-popover").on("click",function(e){var t=$(e.target);t.parents(".popover").hide();return false});$(".popover-trigger").on("click",function(e){var t=$(e.target);if(!t.hasClass("popover-trigger")){t=t.parents(".popover-trigger")}if(t.data("popoverId")!=null){$("#"+t.data("popoverId")).toggle();return false}})},init:function(){this.bindEvents()}};TopBar={init:function(){this.bindEvents()},bindEvents:function(){$(".top-bar .top-bar-toggle").on("click",$.proxy(this.toggleTopBar,this))},toggleTopBar:function(e){var t=$(e.target);if(!t.hasClass("top-bar-toggle")){t=t.parents(".top-bar-toggle")}var n=t.parents(".top-bar").find(".top-bar-content");n.slideToggle({duration:300,easing:"easeInOutBack",complete:function(){var e=n.is(":visible");if(e){if(t.data("visible")){t.html(t.data("visible"))}}else{if(t.data("hidden")){t.html(t.data("hidden"))}}}});return false}};Validation={init:function(){if(jQuery.isFunction(jQuery.fn.live)){$(".validate").live("change",function(e){Validation.validateInput($(e.target))})}else if(jQuery.isFunction(jQuery.fn.on)){$(".validate").on("change",function(e){Validation.validateInput($(e.target))})}},validateInput:function(e){var t=e.val();var n=true;var r="";if(e.data("validationTrim")!=null){var i=e.data("validationTrim");for(var s=0,o=i.length;s<o;s++){t=t.split(i[s]).join("")}}if(e.hasClass("validate-required")&&n){n=t!="";if(e.data("requiredMessage")!=null)r=e.data("requiredMessage");else r="This field is required"}if(e.hasClass("validate-number")&&n){n=!isNaN(t);if(e.data("numberMessage")!=null)r=e.data("numberMessage");else r="Please enter a valid number"}if(e.hasClass("validate-money")&&n){n=!isNaN(t);if(n)n=t>=0;if(e.data("moneyMessage")!=null)r=e.data("moneyMessage");else r="Please enter a valid amount"}if(e.hasClass("validate-positive-number")&&n){n=!isNaN(t);if(n)n=t>=0;if(e.data("positiveNumberMessage")!=null)r=e.data("positiveNumberMessage");else r="Please enter a valid positive number"}if(e.hasClass("validate-email")&&n){var u=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;n=t.search(u)!=-1;if(e.data("emailMessage")!=null)r=e.data("emailMessage");else r="Please enter Email in correct format"}if(e.hasClass("validate-digits")&&n){n=t.match(/[0-9]*/)[0].length==t.length;if(e.data("digitsMessage")!=null)r=e.data("digitsMessage");else r="Only digits allowed"}if(e.hasClass("validate-compare")&&n){if(e.data("compareId")!=null){var a=$("#"+e.data("compareId")).val();n=a==t;if(e.data("compareMessage")!=null)r=e.data("compareMessage");else r="Values do not match"}}if(e.hasClass("validate-minlength")&&n){if(e.data("minLength")!=null){var f=parseInt(e.data("minLength"));n=t.length>=f;if(e.data("minlengthMessage")!=null)r=e.data("minlengthMessage");else r="Minimum "+f+" characters required."}}if(e.hasClass("validate-maxlength")&&n){if(e.data("maxLength")!=null){var l=parseInt(e.data("maxLength"));n=t.length<=l;if(e.data("maxlengthMessage")!=null)r=e.data("maxlengthMessage");else r="Maximum "+l+" characters allowed."}}if(e.hasClass("validate-date")&&n){n=this.validateDate(t);if(e.data("dateMessage")!=null)r=e.data("dateMessage");else r="Not a valid date"}if(e.hasClass("validate-maxvalue")&&n){if(e.data("maxValue")!=null){var c=parseFloat(e.data("maxValue"));if(t.length>0&&!isNaN(t))n=parseFloat(t)<=c;if(e.data("maxvalueMessage")!=null)r=e.data("maxvalueMessage");else r="Value cannot be more than "+c+"."}}if(e.next().hasClass("error-message"))e.next().remove();if(n){e.removeClass("error-background");return true}else{if(r!=""){e.after("<div class='error-message'>"+r+"</div>")}e.addClass("error-background");return false}},validateForm:function(e){var t=$("#"+e+" .validate");var n=true;$.each(t,function(){var e=$(this);if(e.is(":visible")){var t=Validation.validateInput(e);n=n&t}});return n},validateDate:function(e){var t=/^\d{2}\/\d{2}\/\d{4}$/;if(!t.test(e))return false;else{var n=e.split("/")[0];var r=e.split("/")[1];var i=e.split("/")[2];var s=new Date(i,n-1,r);if(s.getMonth()+1!=n||s.getDate()!=r||s.getFullYear()!=i)return false;else return true}}};Utilities={init:function(){this.bindEvents()},bindEvents:function(){$(".advance-focus").on("keyup",$.proxy(this.advanceFocus,this));$(".formatted-field").on("focus",$.proxy(this.removeFormattingEvent,this)).on("blur",$.proxy(this.formatValue,this))},advanceFocus:function(e){var t=$(e.target);var n=t.val().length;if(t.data("advfControl")){var r=-1;if(t.data("advfLength")){r=parseInt(t.data("advfLength"))}else if(t.attr("maxlength")){r=parseInt(t.attr("maxlength"))}if(n==r){$(t.data("advfControl")).focus()}}},removeFormattingEvent:function(e){var t=$(e.target);t.val(this.removeFormatting(t))},removeFormatting:function(e){var t=e.val();if(e.data("validationTrim")!=null){var n=e.data("validationTrim");for(var r=0,i=n.length;r<i;r++){t=t.split(n[r]).join("")}}return t},formatValue:function(e){var t=$(e.target);if(t.val().length>0){if(t.data("display")=="$"){t.val("$"+this.formatDollar(parseFloat(t.val())))}if(t.data("display")=="%"){t.val(t.val()+"%")}}},formatDollar:function(e,t){var n=e.toFixed(2).split(".");var r=n[0].split("").reverse().reduce(function(e,t,n,r){return t+(n&&!(n%3)?",":"")+e},"");if(t){r+="."+n[1]}return r}};(function(e){var t=e({});e.subscribe=function(){t.on.apply(t,arguments)};e.unsubscribe=function(){t.off.apply(t,arguments)};e.publish=function(){t.trigger.apply(t,arguments)}})(jQuery);$(document).ready(function(){TopBar.init();Popover.init();Validation.init();Utilities.init()})